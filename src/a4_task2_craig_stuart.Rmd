---
title: "assignment 4_task 2"
author: "Craig Stuart"
date: "11/13/2020"
output: html_document
---

```{r setup, include=TRUE, warning=FALSE, message=FALSE}
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)

#attach all necessary packages
library(tidyverse)
library(here)
library(janitor)
library(lubridate)
library(knitr)
```

#### Read in Bonanza Creek data
```{r}
bonanza_creek <- read_csv(here("data", "bonanza_hares.csv"))
```

## 1. Introduction
- 4 - 5 sentence "mini-introduction" to what this study is exploring, including basic background information about the subject, site and study (with citations as needed), and a brief overview of what is included in the exploratory report.

## 2. Data and Analyses
- A 3 - 4 sentence section in which you briefly describe the data, including citation & credit as needed, and provide an overview of the main analysis, statistical methods and tools used

## 3. Exploratory Findings

### - Annual juvenile Snowshoe hare trap counts

- Find the total number of juvenile hare trappings for each year of the study
- `filer()` for juvenile observations, `mutate()` the date to get a year variable, and summarize the `count()` by year
- Use `ggplot()` to visualize the absolute count per year

```{r}
juvenile_trap <- bonanza_creek %>% 
  filter(age == "j") %>% 
  mutate(date_new = mdy(date)) %>% 
  mutate(year = year(date_new)) %>% 
  count(year)

ggplot(data = juvenile_trap, aes(x = year, y = n)) +
  geom_bar(stat = "identity", fill = "gray", color = "black") +
  labs(x = "Study Year", y = "Number of Counts", title = "Annual Juvenile Hare Trap Counts") +
  scale_y_continuous(breaks = seq(0,130,20)) +
  theme_bw()
```

- Use `summary()` to display mean, median, max, and min

```{r}
summary(juvenile_trap)
```
- The maximum number of juvenile hare trappings occurred in 1999 (n = 126) and the minimum juvenile hare trappings occurred in 2010 (n = 2). The mean hare trappings throughout the entire study was 31.5 and the median was 18.5. Some general trend notes would be that the number of juvenile hare trappings had high variance from year to year. What this graph fails to present is the amount of effort put into each year. For instance, it would make sense if in 2010 only two days resulted in 2 trap counts, but the data would be very different if only 2 trap counts were observed in 365 days of the study. Therefore, going forward, a better way to standardize the juvenile hare population is to calculate the trap count per unit effort.


### - Visualize juvenile Snowshoe hare weights 

- Compare juvenile hare weights by sex and site (grid)

- Juvenile hare weight vs. sex
```{r}
j_weights_sex <- bonanza_creek %>% 
  select("weight", "age", "sex") %>% 
  filter(age == "j") %>% 
  mutate(sex = case_when(
    sex %in% "f" ~ "Female",
    sex %in% "m" ~ "Male"))

ggplot(data = j_weights_sex, aes(weight)) +
  geom_histogram(bins = 20) +
  facet_wrap(~sex) +
  labs(x = "Weight (g)", y = "Count", title = "Juvenile Hare Weight Histogram Distribution by Sex")

ggplot(data = j_weights_sex, aes(sample = weight)) +
  geom_qq() +
  facet_wrap(~sex)
```

- Summary statistics
```{r}
j_weights_sex %>% 
  filter(weight != "NA") %>% 
  group_by(sex) %>% 
  summarize(
    mean_weight = mean(weight),
    median_weight = median(weight),
    sd_weight = sd(weight),
    sample_size = n()
  )
```

- Juvenile hare weight vs. site(grid)

```{r}
j_weight_grid <- bonanza_creek %>% 
  select("weight", "age", "grid") %>% 
  filter(age == "j")

ggplot(data = j_weight_grid, aes(weight)) +
  geom_histogram(bins = 20) +
  facet_wrap(~grid)

ggplot(data = j_weight_grid, aes(sample = weight)) +
  geom_qq() +
  facet_wrap(~grid)
```
- Summary statistics
```{r}
j_weight_grid %>% 
  filter(weight != "NA") %>% 
  group_by(grid) %>% 
  summarize(
    mean_weight = mean(weight),
    median_weight = median(weight),
    sd_weight = sd(weight),
    sample_size = n()
  )
```

### - Juvenile weight comparison

### - Relationship between juvenile weight & hind foot length

## 4. Summary
- Include a very short summary describing your main findings from your juvenile hares exploration (bulletpoints are fine)

## 5. Citations
- Kielland, K., F.S. Chapin, R.W. Ruess, and Bonanza Creek LTER. 2017. Snowshoe hare physical data in Bonanza Creek Experimental Forest: 1999-Present ver 22. Environmental Data Initiative. https://doi.org/10.6073/pasta/03dce4856d79b91557d8e6ce2cbcdc14







